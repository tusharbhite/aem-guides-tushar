
<style>@media only screen and (max-width: 600px) {

    .gridParent{
    
    display:inline-flex;
    
    }
    
    .gridChild1{
    width:40%
    }
    
    .gridChild2{
    width:60%
    }
    .accordion-button .card{
    border:none;}
    }
    
    .accordion-button .card:active{
    background-color: var(--bs-accordion-active-bg) !important;
    }
    
    .gridParent:active{
    background-color: var(--bs-accordion-active-bg) !important;
    }
    
    .accordion-button{
    
    padding:0px;}
    .accordion-item {
    padding:0px;
    }
    
    .posterimg {
        height: 200px;
        width: 135px;
        object-fit: cover;
    }
    
    }

</style>


<h1 class="text-center">${currentPage.title} Movies List</h1>

<div data-sly-test="${!properties.groupStyle}" class="container" data-sly-list.item="${currentPage.listChildren}">
<h6>${itemList.count} : <a href="${item.path @ extension='html'}"> ${item.properties.jcr:title}</a><span> ${item.properties.tagLine}<span></h6>
</div>

<div data-sly-test="${properties.groupStyle=='detailedlist'}" class="container">

    
    <h1>Movies & Songs List</h1>

    <h1 as>${ 'dd-MMMM-yyyy' @ format=currentPage.jcr:created }</h1>
    <h1 as></h1>
    
    <sly data-sly-use.model="com.tushar.aem.guides.core.models.GenericGroupListModel" />
    
    <p>model.movieparentpath = ${model.movieparentpath}</p>
    
    
        <div class="accordion accordion-flush row" id="accordionExample" data-sly-list="${model.movieSongs}" >
          <div class="accordion-item col-md-6" >
            <h2 class="accordion-header" id="headingOne">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse${itemList.index @ context='unsafe'}" aria-expanded="false" aria-controls="collapseOne">
    
                    <div class="card mb-3" style="width: 540px;">
                      <div class="row g-0 gridParent">
                        <div class="col-md-4 gridChild1">
                          <img style="height:200px" src="${item.moviePoster}" class="img-fluid posterimg rounded-start height200" alt="...">
                        </div>
                        <div class="col-md-8 gridChild2">
                          <div class="card-body">
                            <h5 class="card-title fw-bold">  <span class="badge bg-secondary">${itemList.count}</span> ${item.movieTitle}</h5>
                            <p class="card-text">${item.properties.tagLine}</p>
                            <p class="card-text"><small class="text-muted">Last updated at ${ 'dd-MMMM-yyyy hh:mm:ss' @ format=currentPage.properties.cq:lastModified }</small></p>
                          </div>
                        </div>
                      </div>
                    </div>
    
              </button>
            </h2>
            <div id="collapse${itemList.index @ context='unsafe'}" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
              <div class="accordion-body">
    
                    <ul class="list-group" data-sly-list.song="${item.songsList}">
                      <li class="list-group-item"><a href="${song.path @extension='html'}"><i class="fa-solid fa-music"></i> ${song.title}</li></a>
                    </ul>
    
              </div>
            </div>
          </div>
        </div>
    <p>path ${model.movieparentpath} </p> <br/>
    
    
    
    
    
    
    
    
    <!--/*
    
    <h6 data-sly-list="${model.movieSongs}">
    
        <dt>index: ${itemList.index}</dt>
    
        <dt>path: ${item.moviePath}</dt>
    
        <dt>title: ${item.movieTitle}</dt>
    
        <dt>songs: ${item.songsList.size}</dt>
    
        <dt data-sly-repeat.song="${item.songsList}" >songs title: ${song.title} songs path: ${song.path}</dt>
    
    
        <dt>poster: ${item.moviePoster}</dt>
    
    
    </h6>
    
    */-->
    <h1>THE END</h1>
</div>
